{"version":3,"file":"typeguards.js","sourceRoot":"","sources":["../typeguards.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Contains typeguards for geostyler-style\n * https://basarat.gitbook.io/typescript/type-system/typeguard#user-defined-type-guards\n */\n\nimport _isString from 'lodash/isString';\nimport _isNumber from 'lodash/isNumber';\nimport _isBoolean from 'lodash/isBoolean';\nimport _isRegExp from 'lodash/isRegExp';\nimport _isNull from 'lodash/isNull';\n\nimport {\n  BasePointSymbolizer,\n  BaseSymbolizer,\n  ChannelSelection,\n  CombinationFilter,\n  CombinationOperator,\n  ComparisonFilter,\n  ComparisonOperator,\n  FillSymbolizer,\n  Filter,\n  GrayChannel,\n  IconSymbolizer,\n  LineSymbolizer,\n  MarkSymbolizer,\n  NegationFilter,\n  NegationOperator,\n  Operator,\n  PropertyType,\n  RasterSymbolizer,\n  RGBChannel,\n  Rule,\n  ScaleDenominator,\n  TextSymbolizer,\n  Expression,\n  FunctionCall,\n  GeoStylerBooleanFunction,\n  GeoStylerNumberFunction,\n  GeoStylerStringFunction,\n  GeoStylerUnknownFunction,\n  GeoStylerFunction\n} from './index';\n\nexport const isExpression = (got: any): got is Expression<any> => {\n  return isFunctionCall(got) || isPropertyType(got);\n};\n\nexport const isFunctionCall = (got: any): got is FunctionCall<any> => {\n  return got.type === 'functioncall' &&\n    got.hasOwnProperty('name') &&\n    _isString(got.name) &&\n    got.hasOwnProperty('args') &&\n    Array.isArray(got.args) &&\n    got.args.every((arg: any) => isExpression(arg));\n};\n\n// PropertyValue\nexport const isPropertyType = (got: any): got is PropertyType => {\n  return _isString(got) || _isNumber(got) || _isBoolean(got) || got === null;\n};\n\n// ScaleDenominator\nexport const isScaleDenominator = (got: any): got is ScaleDenominator => {\n  return (got?.min || got?.max) &&\n    (got.min ? isFilter(got.min) : true) &&\n    (got.max ? isFilter(got.max) : true);\n};\n\n// Operators\nexport const isOperator = (got: any): got is Operator => {\n  return isComparisonOperator(got) ||\n    isCombinationOperator(got) ||\n    isNegationOperator(got);\n};\nexport const isComparisonOperator = (got: any): got is ComparisonOperator => {\n  return ['==', '*=' , '!=' , '<' , '<=' , '>' , '>=', '<=x<='].includes(got);\n};\nexport const isCombinationOperator = (got: any): got is CombinationOperator => {\n  return ['&&', '||'].includes(got);\n};\nexport const isNegationOperator = (got: any): got is NegationOperator => {\n  return got === '!';\n};\n\n// Filters\nexport const isFilter = (got: any): got is Filter => {\n  return isComparisonFilter(got) ||\n    isCombinationFilter(got) ||\n    isGeoStylerBooleanFunction(got) ||\n    isNegationFilter(got);\n};\nexport const isComparisonFilter = (got: any): got is ComparisonFilter => {\n  const expectedLength = got && got[0] === '<=x<=' ? 4 : 3;\n  return Array.isArray(got) &&\n    got.length === expectedLength &&\n    isComparisonOperator(got[0]) &&\n    (isGeoStylerBooleanFunction(got[1]) || _isString(got[1])) &&\n    isPropertyType(got[2]) &&\n    (got[0] !== '<=x<=' || _isNumber(got[3]));\n};\nexport const isCombinationFilter = (got: any): got is CombinationFilter => {\n  return Array.isArray(got) &&\n    got.length >= 3 &&\n    isCombinationOperator(got[0]) &&\n    got.every((arg, index) => index === 0 || isFilter(arg));\n};\nexport const isNegationFilter = (got: any): got is NegationFilter => {\n  return Array.isArray(got) &&\n    got.length === 2 &&\n    isNegationOperator(got[0]) &&\n    isFilter(got[1]);\n};\n\n// Symbolizers\nexport const isSymbolizer = (got: any): got is BaseSymbolizer => {\n  return ['Fill', 'Icon', 'Line', 'Text', 'Mark', 'Raster'].includes(got?.kind);\n};\nexport const isPointSymbolizer = (got: any): got is BasePointSymbolizer => {\n  return ['Icon', 'Text', 'Mark'].includes(got?.kind);\n};\nexport const isIconSymbolizer = (got: any): got is IconSymbolizer => {\n  return got?.kind === 'Icon';\n};\nexport const isTextSymbolizer = (got: any): got is TextSymbolizer => {\n  return got?.kind === 'Text';\n};\nexport const isMarkSymbolizer = (got: any): got is MarkSymbolizer => {\n  return got?.kind === 'Mark' && _isString(got?.wellKnownName);\n};\nexport const isLineSymbolizer = (got: any): got is LineSymbolizer => {\n  return got?.kind === 'Line';\n};\nexport const isFillSymbolizer = (got: any): got is FillSymbolizer => {\n  return got?.kind === 'Fill';\n};\nexport const isRasterSymbolizer = (got: any): got is RasterSymbolizer => {\n  return got?.kind === 'Raster';\n};\n\n// Rule\nexport const isRule = (got: any): got is Rule => {\n  return _isString(got?.name) &&\n    (got?.filter ? isFilter(got.filter) : true) &&\n    (got?.scaleDenominator ? isScaleDenominator(got.scaleDenominator) : true) &&\n    got?.symbolizers.every((arg: any) => isSymbolizer(arg));\n};\n\n/**\n * Checks if ChannelSelection is of type RGBChannel.\n */\nexport const isRgbChannel = (channels: ChannelSelection): channels is RGBChannel => {\n  return (\n    (channels as RGBChannel).redChannel !== undefined\n      || (channels as RGBChannel).greenChannel !== undefined\n      || (channels as RGBChannel).blueChannel !== undefined\n  );\n};\n\n/**\n * Checks if ChannelSelection is of type GrayChannel.\n */\nexport const isGrayChannel = (channels: ChannelSelection): channels is GrayChannel => {\n  return (channels as GrayChannel).grayChannel !== undefined;\n};\n\n// Functions\nexport const isGeoStylerNumberFunction = (got: any): got is GeoStylerNumberFunction => {\n  return [\n    'abs',\n    'acos',\n    'asin',\n    'atan',\n    'atan2',\n    'ceil',\n    'cos',\n    'exp',\n    'floor',\n    'log',\n    'max',\n    'min',\n    'modulo',\n    'pi',\n    'pow',\n    'random',\n    'rint',\n    'round',\n    'sin',\n    'sqrt',\n    'strIndexOf',\n    'strLastIndexOf',\n    'strLength',\n    'tan',\n    'toDegrees',\n    'toRadians'\n  ].includes(got?.name);\n};\n\nexport const isGeoStylerStringFunction = (got: any): got is GeoStylerStringFunction => {\n  return [\n    'numberFormat',\n    'strAbbreviate',\n    'strCapitalize',\n    'strConcat',\n    'strDefaultIfBlank',\n    'strReplace',\n    'strStripAccents',\n    'strSubstring',\n    'strSubstringStart',\n    'strToLowerCase',\n    'strToUpperCase',\n    'strTrim'\n  ].includes(got?.name);\n};\n\nexport const isGeoStylerBooleanFunction = (got: any): got is GeoStylerBooleanFunction => {\n  return [\n    'between',\n    'double2bool',\n    'in',\n    'parseBoolean',\n    'strEndsWith',\n    'strEqualsIgnoreCase',\n    'strMatches',\n    'strStartsWith'\n  ].includes(got?.name);\n};\n\nexport const isGeoStylerUnknownFunction = (got: any): got is GeoStylerUnknownFunction => {\n  return [\n    'property',\n  ].includes(got?.name);\n};\n\nexport const isGeoStylerFunction = (got: any): got is GeoStylerFunction => {\n  return isGeoStylerBooleanFunction(got) ||\n    isGeoStylerNumberFunction(got) ||\n    isGeoStylerStringFunction(got) ||\n    isGeoStylerUnknownFunction(got);\n};\n"]}